{"data":[{"title":"404 Not Found","url":"/404.html","content":"\n    \n\n\n\n    Image from http.cat.\n\n"},{"title":"About","url":"/about/","content":"\n\n\nAbout Me\n\n学生党, 新鲜韭菜\n\n对称呼没啥要求, 不过分叫着顺口就可以啦, 嘻嘻\n\n喜欢的游戏: Minecraft Java Edition, NieR:Automata, 守望先锋; 除此之外偶尔会玩PUBG, FGO, 崩坏3等游戏。\n\n喜欢的动漫/电影: 空之境界剧场版（墙裂推荐空境原著）、FSN &amp; FZ全系列、某科学的超电磁炮、君主·埃尔梅罗二世事件簿 魔眼收集列车 Grace note、声之形、秒速5厘米、还有利兹与青鸟。\n\n还看过格莱普尼尔、黑执事、几集新世纪福音战士和宝石之国和魔法禁书目录、我们从未知道那天所见的花的名字等动漫。\n\n月厨, 空境剧场版看过无数遍, 原著看过一次后打算有时间再看一遍, 第一次读原著好多东西都没有看懂, FGO玩不懂算是个假月厨吧。\n\n听歌种类略杂, 但是几乎不听华语。喜欢的歌以ACG系列为主, 首选Kalafina和梶浦由記的曲子, 尽管不是东方厨但是东方的歌确实好听, 除此之外还听电音和轻音乐。\n\n常用Apple Music, 因为Apple Music有Kalafina的版权, 除此之外偶尔会用网易云音乐查找歌曲以及听日推, 拒绝鹅厂。\n\n偶尔在B站水视频, 是一名没有几个粉丝、几个月一更新的那种月更UP主, 不追求播放量和粉丝数, 有人喜欢就很开心了。\n\n性格这个我也说不清, 貌似有些社恐和拖延症, 拥有众多手段自我设障, 不过都太复杂了我也讲不清楚（也不想弄清楚了, 不爱说话是真的\n\n菜, 很菜, 非常菜, 还懒, 不想努力, 肥, 宅, 新手, 不萌, 丑, 接近于废物一个。\n\n睡觉 睡觉 睡觉 睡觉 睡觉 睡觉 ZZZZZZZ~\n\n可能会随着心情波动而大批量的修改博客上的内容（已经在尽力的控制自己了\n\n尽量不要和我提“看了我的博客”这个话题, 因为我的博客是给自己看的不是给别人看的, 所以我有时会尽可能的结束这个话题, （推荐快捷键Ctrl+W）\n\n\nSTARRY-S' Blog\n建于2016年8月21日, 曾用域名starry-s.xyz、starry-s.com和starry-s.cn。\n现用域名为starry-s.me, 以后没问题的话就不打算换域名了因为.me域名好记而且我挺喜欢的, 也不是很贵(听说涨价了, 嘤)。\n因为之前更新过太多日常/碎碎念之类的水文, 于是2020年5月某天把旧篇幅全都删掉了, 后来恢复了部分内容。如果实在想看以前的博客的话可以翻GitHub上的comments, 以后尽量以技术类文章为主, 可能会某一阵子突然变得高产或者突然连续好几个月不更新，如果实在写不出来/没什么可写的话我会选择停更一段时间。\n本站由Hikaru生成, 主题为ARIA, 托管于GitHub Pages（见页面右下角）, 很喜欢这个生成器以及ARIA这款主题。\n音乐播放器是我自己为Hikaru适配的APlayer插件, 原理实现很简单, 欢迎去提issues。\n刚更新了播放器插件, 勉强适配了一下新出的暗色模式, 如果只调整播放器背景颜色的话在播放列表模式或者含有歌词显示时会很难看, 一开始想自定义css文件的后来觉得太麻烦得增加很多代码所以目前只是适配了没有播放列表、没有歌词的这种情况, 播放器背景颜色会随着主题颜色改变而改变, 其他情况的解决方法还没想好, 不过说实话黑色模式还挺好看的。因为实在没啥技术含量所以就不单独开一篇文章讲这么水的事情了。\n\n \n\n\nconst ap0 = new APlayer ({\n    container: document.getElementById(\"aplayer0\"),\n    theme: \"#33363b\",\n    fixed: false,\n    listFolded: false,\n    listMaxHeight: false,\n    lrcType: false,\n    mini: false,\n    volume: 0.7,\n    order: \"list\",\n    loop: \"all\",\n    autoplay: false,\n    audio: [{\n        name: \"尼尔机械纪元 Nier Automata - Soundtrack Medley\",\n        artist: \"Animenz\",\n        url: \"https://music.starry-s.me/music/0f0e_0758_070b_8de6859a81025aae1e540aed59439f48.m4a\",\n        cover: \"https://music.starry-s.me/music/cover/109951163092751719.jpg\",\n        lrc: \"\",\n        theme: \"#F6890E\"\n    }]\n});\n \n\n\n写于2020年8月16日凌晨, 随时更新。\n\n"},{"title":"归档","url":"/archives/","content":""},{"title":"分类","url":"/categories/","content":""},{"title":"首页","url":"/","content":""},{"title":"标签","url":"/tags/","content":""},{"title":"小米路由器3G之使用TTL串口刷机救砖","url":"/posts/xiaomi-r3g-ttl-flash/","content":"\n\n砖了\n本来路由器闲置了一年了都没咋用了，前两天想把OpenWrt系统刷回原厂系统。\n然鹅刷原厂固件时忘记改环境变量了，因为第三方Boot Loader也被我顺带刷回了原厂的所以现在开机无限重启。\n之前买单片机套件时赠了一条usb转ttl线的，但是被我放学校了。只好再从万能的某宝再买一条线，尝试着救砖了。\n(在某宝发现了一家店啥元件都有，还特别便宜。于是我还顺带买了很多杜邦线、电阻、LED灯、面包板等小玩意...)\n\n\n \n\n\nconst ap0 = new APlayer ({\n    container: document.getElementById(\"aplayer0\"),\n    theme: \"#33363b\",\n    fixed: false,\n    listFolded: false,\n    listMaxHeight: false,\n    lrcType: false,\n    mini: false,\n    volume: 0.7,\n    order: \"list\",\n    loop: \"all\",\n    autoplay: false,\n    audio: [{\n        name: \"crescent in the sky\",\n        artist: \"Stepan Voles\",\n        url: \"https://music.starry-s.me/music/396e_a80d_10de_076d0b69c03bd2673595bd17ce939f69.mp3\",\n        cover: \"https://music.starry-s.me/music/cover/1379887099097990.jpg\",\n        lrc: \"\",\n        theme: \"#2233ee\"\n    }]\n});\n \n\n\n拆机\n\n\n北方冬季气候干燥，拆机时记得放静电，找根铁丝把自己连地线上 (找个金属外壳是接地的电器和自己连上也行)。\n\n拆开路由器外壳，卸下主板，顺手拆掉了散热片（屏蔽罩）。\n串口在图片上主板的左侧，旁边有标记，从上到下依次是TX、GND、RX、1。需要注意的是主板上的TX要接到usb串口的RX，主板上的RX要接到usb串口的TX，GND连GND，VCC不用连。为了防止接错线，小米还十分贴心的标注了每个接口对应的连接线的颜色。\n\n找出家里吃灰好几年差点被我扔掉的电烙铁，刮刀头刮了半天电烙铁才上锡，把新买的杜邦线母线焊到主板上，和ttl串口线相连。\n(电烙铁太破了根本焊不上锡，焊得很丑，emmm)\n实际上可以买个4PIN单排针焊上去，把串口接到排针上就可以，我直接把电线焊到上面以后用起来会很麻烦。\n刷机\n\n以下部分基于Arch Linux，其他系统的操作方式可能不一样（例如Windows可能需要超级终端访问串口，再想办法开一个tftp服务器）\n刷机的原理: 通过ttl串口线连接路由器的主板，让路由器访问电脑上的tftp服务器，刷第三方Boot Loader。\n\n\n首先电脑上装一个tftp服务器。\n1\n2$ sudo pacman -S tftp-hpa\n$ sudo systemctl start tftpd.service\ntftp的默认目录为/srv/tftp。\n这里使用HackPascal制作的Breed（第三方Boot Loader），下载链接，把下载好的Breed重命名为breed.bin，复制到tftp的默认目录。\n1\n2$ cd /srv/tftp\n$ sudo cp ~/Downloads/breed-mt7620-xiaomi-r3g.bin breed.bin\n\n路由器插网线连电脑，设置静态ip地址192.168.1.3/24，将串口和电脑连接，先不给路由器通电，通常情况下usb串口的设备名称为/dev/ttyUSB0，如果不确定的话可以dmesg查一下。\n\n使用screen连接串口，波特率为115200。\n1\n2$ sudo pacman -S screen\n$ sudo screen /dev/ttyUSB0 115200\n路由器通电，终端上会显示路由器启动的信息，等几秒后在选择启动项的时候按9，通过TFTP加载Boot Loader。\n\n如果串口在连接到电脑的情况下主板通电时没有响应，那就断开usb串口先给主板通电后再连接串口。\n(我语文不好别骂我)\n如果路由器没有变砖可以正常启动（蓝灯长亮），在正常开机过程中不能选择启动项。此时可以尝试在路由器开机后长按reset按钮7s以上直到主板重启，便可以选择启动项。\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12Please choose the operation: \n1: Load system code to SDRAM via TFTP. \n2: Load system code then write to Flash via TFTP. \n3: Boot system code via Flash (default).\n4: Entr boot command line interface.\n7: Load Boot Loader code then write to Flash via Serial. \n9: Load Boot Loader code then write to Flash via TFTP. \n\nYou choosed 9\n\n9: System Load Boot Loader then write to Flash via TFTP. \nWarning!! Erase Boot Loader in Flash then burn new one. Are you sure?(Y/N)y\n之后设置路由器主机地址（192.168.1.1）和TFTP服务器地址(192.168.1.3)以及文件名称(breed.bin)。\n1\n2\n3\n4Please Input new ones /or Ctrl-C to discard\n         Input device IP (192.168.31.1) ==:192.168.1.1\n         Input server IP (192.168.31.3) ==:192.168.1.3\n         Input Uboot filename (uboot.bin) ==:breed.bin\n按回车后开始刷机，过几秒钟后路由器会自动重启，第三方Boot Loader刷写完成。\n路由器断电，长按reset键的同时通电开机，灯闪烁后打开浏览器输入网址http://192.168.1.1便可访问breed后台。\n\n\nDone\n第三方Breed刷完后，先用Breed刷小米官方的开发版固件，开启ssh，之后按照小米路由器3G折腾之刷OpenWrt记录这篇文章刷OpenWrt。\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18BusyBox v1.19.4 (2018-10-29 07:52:03 UTC) built-in shell (ash)\nEnter 'help' for a list of built-in commands.\n\n -----------------------------------------------------\n       Welcome to XiaoQiang!\n -----------------------------------------------------\n  $$$$$$\\  $$$$$$$\\  $$$$$$$$\\      $$\\      $$\\        $$$$$$\\  $$\\   $$\\\n $$  __$$\\ $$  __$$\\ $$  _____|     $$ |     $$ |      $$  __$$\\ $$ | $$  |\n $$ /  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ /  $$ |$$ |$$  /\n $$$$$$$$ |$$$$$$$  |$$$$$\\         $$ |     $$ |      $$ |  $$ |$$$$$  /\n $$  __$$ |$$  __$$&lt; $$  __|        $$ |     $$ |      $$ |  $$ |$$  $$&lt;\n $$ |  $$ |$$ |  $$ |$$ |           $$ |     $$ |      $$ |  $$ |$$ |\\$$\\\n $$ |  $$ |$$ |  $$ |$$$$$$$$\\       $$$$$$$$$  |       $$$$$$  |$$ | \\$$\\\n \\__|  \\__|\\__|  \\__|\\________|      \\_________/        \\______/ \\__|  \\__|\n\n\nroot@XiaoQiang:~# \n\n"}]}